(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1290:()=>{},5077:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var n=a(5155),l=a(2115);let s={totalGamesPlayed:0,totalPerfectGames:0,todaysScore:0,hasPlayedToday:!1,localGameIndex:0,playerTheme:"dark"};async function o(){let e=await fetch("https://movie-rating-server-gpf9arfcesb5hahd.westus3-01.azurewebsites.net:443/MovieInfo",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw Error("Fetch movie data failed");return await e.json()}function i(e){let{text:t}=e;return(0,n.jsx)("div",{className:"w-dvw h-dvh flex self-center content-center justify-self-center text-center",children:(0,n.jsx)("p",{className:"self-center place-self-center w-full",children:t})})}function r(e){let{text:t}=e;return(0,n.jsx)("div",{className:"w-full h-full flex self-center content-center justify-self-center text-center",children:(0,n.jsx)("p",{className:"self-center place-self-center",children:t})})}function c(e){let{imgLink:t,imgAlt:a,imgStyle:s}=e,[o,i]=(0,l.useState)("");return(0,l.useEffect)(()=>{!async function(){i(await d(t))}()},[t]),""===o?(0,n.jsx)(r,{text:"Loading Movie Poster..."}):(0,n.jsx)("img",{src:o,alt:a,className:"".concat(s)})}async function d(e){return"".concat(e)}function m(e){let{movie:t}=e,a=t.Actors.split(",");function l(e){let{actor:t}=e;return(0,n.jsx)("li",{className:"movieInfoPrimaryText",children:t})}return(0,n.jsxs)("div",{className:"mainMovieInfoDiv",children:[(0,n.jsx)(c,{imgLink:t.Poster,imgAlt:"".concat(t.Title," Poster"),imgStyle:"moviePosterImage"}),(0,n.jsxs)("div",{className:"movieInfoDivCol2",children:[(0,n.jsxs)("div",{className:"movieInfoTextDiv",children:[(0,n.jsx)("p",{className:"movieInfoSecondaryText",children:"Director:"}),(0,n.jsx)("p",{className:"movieInfoPrimaryText",children:t.Director})]}),(0,n.jsxs)("div",{className:"movieInfoTextDiv",children:[(0,n.jsx)("p",{className:"movieInfoSecondaryText",children:"Top Billed:"}),(0,n.jsx)("div",{className:"movieActorBulletPoints",children:(0,n.jsx)(function(e){let{count:t}=e,s=[];for(let e=0;e<t;e++)s.push((0,n.jsx)(l,{actor:a[e]},e));return s},{count:a.length})})]}),(0,n.jsxs)("div",{className:"movieInfoLongTextDiv",children:[(0,n.jsx)("p",{className:"movieInfoSecondaryText",children:"Movie Summary:"}),(0,n.jsx)("p",{className:"movieInfoPrimaryText text-balance",children:t.Plot})]})]})]})}a(1290);let u=[500,300,0],x=[.5,5,5];function h(e){let{ratingSourceInt:t,movieRatingString:a,playerMovieRating:n}=e,l=function(e){let{ratingSourceInt:t,movieRatingString:a}=e,n=parseFloat(a);if(Number.isFinite(n)&&!Number.isNaN(n))return n;let l=[a.split("/10"),a.split("/100"),a.split("%")];return Number(l[t]?l[t][0]:"")}({ratingSourceInt:t,movieRatingString:a}),s=[l-x[t],l+x[t],l];return n===s[2]?0:n>=s[0]&&n<=s[1]?1:2}function y(e){let{selectedIndex:t}=e;function a(e){let{index:a}=e;return(0,n.jsx)("div",{className:"".concat(a==t?"galleryIconSelected":a<t?"galleryIconInactive":"galleryIconDefault")})}return(0,n.jsx)("div",{className:"galleryIconsDiv",children:(0,n.jsx)(function(e){let{count:t}=e,l=[];for(let e=0;e<t;e++)l.push((0,n.jsx)(a,{index:e},e));return l},{count:3})})}let g=["Perfect Rating!","Pretty Close","Incorrect Rating"],v=["bg-[#00ad5c]","bg-[#02B99E]","bg-[#FF0000]"];function f(e){let{visible:t,ratingSourceInt:a,actualMovieRating:l,playerMovieRating:s,playerStats:o,onNextMovie:i}=e,r=h({ratingSourceInt:a,movieRatingString:l,playerMovieRating:s});function c(e){let{titleText:t,statsText:a}=e;return(0,n.jsxs)("div",{className:"divCenterHorizontalText",children:[(0,n.jsx)("p",{className:"scoreTextSecondary",children:t}),(0,n.jsx)("p",{className:"scoreTextPrimary",children:a})]})}return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{className:"fullScreenBlockingDiv",children:(0,n.jsxs)("div",{className:"".concat(v[r]," popupBackgroundDiv"),children:[(0,n.jsxs)("div",{className:"popupTextContainer",children:[(0,n.jsx)("p",{className:"popupTitleText",children:g[r]}),(0,n.jsx)(c,{titleText:"Your Rating:",statsText:"".concat(s)}),(0,n.jsx)(c,{titleText:"Actual Rating:",statsText:"".concat(l)}),(0,n.jsx)(c,{titleText:"Your Score Today:",statsText:o?"".concat(o.todaysScore):"No Stats"})]}),(0,n.jsx)("div",{onClick:()=>null==i?void 0:i(),className:"submitButton",children:(0,n.jsx)("p",{children:"NEXT MOVIE"})})]})})})}function p(e){let{visible:t,playerStats:a}=e;function l(e){let{text:t,stats:a}=e;return(0,n.jsxs)("div",{className:"divCenterHorizontalText",children:[(0,n.jsx)("p",{className:"scoreTextSecondary",children:t}),(0,n.jsx)("p",{className:"scoreTextPrimary",children:null!=a?a:"No Stats"})]})}return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)("div",{className:"fullScreenBlockingDiv",onClick:e=>{e.stopPropagation()},children:(0,n.jsx)("div",{className:"popupBackgroundDiv bg-[#001f1a]",children:(0,n.jsxs)("div",{className:"popupTextContainer",children:[(0,n.jsx)("p",{className:"popupTitleText",children:"Thank you for playing today!"}),(0,n.jsx)(l,{text:"Today's Score:",stats:null==a?void 0:a.todaysScore}),(0,n.jsx)(l,{text:"Total Games Played:",stats:null==a?void 0:a.totalGamesPlayed}),(0,n.jsx)(l,{text:"Number of Perfect Games:",stats:null==a?void 0:a.totalPerfectGames})]})})})})}function j(e){return localStorage.getItem(e)}function S(e,t){localStorage.setItem(e,t)}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e=>"".concat(t).concat(e);try{S(a("totalGamesPlayed"),String(e.totalGamesPlayed)),S(a("totalPerfectGames"),String(e.totalPerfectGames)),S(a("todaysScore"),String(e.todaysScore)),S(a("hasPlayedToday"),e.hasPlayedToday?"true":"false"),S(a("localGameIndex"),String(e.localGameIndex)),S(a("playerTheme"),e.playerTheme)}catch(e){console.error("Error saving player stats to localStorage",e)}console.log("SAVING LOCAL PLAYER STATS:"),console.log(e)}function N(e){let{playerStats:t}=e;document.body.classList.remove("lightmode"),document.body.classList.add("darkmode"),t.playerTheme="dark",T(t)}function I(e){let{playerStats:t}=e;document.body.classList.remove("darkmode"),document.body.classList.add("lightmode"),t.playerTheme="light",T(t)}function P(e){let{playerStats:t}=e;return(0,n.jsx)("div",{className:"switchThemeButton",onClick:()=>(function(e){let{playerStats:t}=e;(null==t?void 0:t.playerTheme)==="light"?N({playerStats:t}):I({playerStats:t})})({playerStats:t}),children:(0,n.jsx)("p",{children:"SWITCH THEME"})})}let R=[0,0,0],b=[10,100,100],G=[5,50,50],k=[.1,1,1],C=["IMDB","Rotten Tomatoes","Metacritic"];function D(){var e;let[t,a]=(0,l.useState)([]),[r,c]=(0,l.useState)(0),[d,x]=(0,l.useState)(G[0]),[g,v]=(0,l.useState)(!1),[S,D]=(0,l.useState)(null),[M,w]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=async()=>{let e,t=await o();a(t.movies),x(G[t.movies[0].RandomRatingInt]);let n=(e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=t=>"".concat(e).concat(t),a=j(t("totalGamesPlayed")),n=j(t("totalPerfectGames")),l=j(t("todaysScore")),s=j(t("hasPlayedToday")),o=j(t("localGameIndex")),i=j(t("playerTheme"));if(![a,n,l,s,o,i].some(e=>null!==e))return null;let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null===e)return t;let a=Number(e);return Number.isFinite(a)?a:t};return{totalGamesPlayed:r(a,0),totalPerfectGames:r(n,0),todaysScore:r(l,0),hasPlayedToday:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null===e?t:"true"===e||"1"===e}(s,!1),localGameIndex:r(o,0),playerTheme:"light"===i||"dark"===i?i:"dark"}}())?(console.log("local data found:"),console.log(e),D(e),e):(console.log("no current local stats: saving new player stats"),T(s),D(s),s);n.localGameIndex!==t.dailyId&&(n.hasPlayedToday=!1,n.localGameIndex=t.dailyId,n.todaysScore=0,console.log("Resetting Daily Stats"),console.log(n)),"light"===n.playerTheme?I({playerStats:n}):N({playerStats:n}),D(n),w(!0),T(n)};M||e()},[t,d,S,M]),M)?(0,n.jsx)("main",{className:"mainPage",children:(0,n.jsxs)("div",{className:"mainContainer",children:[(0,n.jsxs)("div",{className:"contentContainer",children:[(0,n.jsxs)("div",{className:"mainQuestionDiv",children:[(0,n.jsx)("p",{children:"What do you think"}),(0,n.jsxs)("p",{className:"movieTitleText",children:[t[r].Title," (",t[r].Year,")"]}),(0,n.jsxs)("p",{children:["is rated on ",C[t[r].RandomRatingInt],"?"]})]}),(0,n.jsx)(m,{movie:t[r]}),(0,n.jsxs)("div",{className:"controllerContentContainer",children:[(0,n.jsxs)("div",{className:"sliderContainer",children:[(0,n.jsx)("input",{type:"range",name:"ratingSlider",id:"ratingSlider",min:R[t[r].RandomRatingInt],max:b[t[r].RandomRatingInt],step:k[t[r].RandomRatingInt],value:d,onChange:e=>x(parseFloat(e.target.value)),className:"ratingSliderStyle"}),(0,n.jsxs)("label",{htmlFor:"ratingSlider",className:"sliderLabelText",children:["Your Rating: ",0===t[r].RandomRatingInt?Number(d).toFixed(1):d]})]}),(0,n.jsx)(function(e){let{currentPlayerMovieRating:a,playerStats:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{onClick:()=>void(l&&(!function(e){let{ratingSourceInt:t,movieRatingString:a,playerMovieRating:n,playerStats:l}=e,s=u[h({ratingSourceInt:t,movieRatingString:a,playerMovieRating:n})];l.todaysScore+=s,console.log("TODAYS SCORE: "+l.todaysScore)}({ratingSourceInt:t[r].RandomRatingInt,movieRatingString:t[r].RatingValue,playerMovieRating:a,playerStats:l}),T(l)),v(!0)),className:"submitButton",children:(0,n.jsx)("p",{children:"SUBMIT RATING"})})})},{currentPlayerMovieRating:d,playerStats:S}),(0,n.jsx)(y,{selectedIndex:r})]})]}),(0,n.jsx)(f,{ratingSourceInt:t[r].RandomRatingInt,actualMovieRating:t[r].RatingValue,playerMovieRating:d,playerStats:S,visible:g,onNextMovie:function(){let e=function(e){let{currentIndex:t,arrayLength:a}=e;return t<a?t+1:null}({currentIndex:r,arrayLength:t.length-1});e?(c(e),v(!1),x(G[t[e].RandomRatingInt])):(c(0),v(!1),x(G[t[0].RandomRatingInt]),S&&function(e){let{playedToday:a,playerStats:n}=e;n.totalGamesPlayed+=1;let l=t.length,o=u[0];n.todaysScore===o*l&&(n.totalPerfectGames+=1),D(e=>{let t=e?{...e,hasPlayedToday:a}:{...s,hasPlayedToday:a};return T(t),t})}({playedToday:!0,playerStats:S}))}}),(0,n.jsx)(p,{visible:null!=(e=null==S?void 0:S.hasPlayedToday)&&e,playerStats:S}),(0,n.jsx)(P,{playerStats:null!=S?S:s})]})}):(0,n.jsx)(i,{text:"Could not load movie data from server. Please try again."})}},8447:(e,t,a)=>{Promise.resolve().then(a.bind(a,5077))}},e=>{e.O(0,[741,441,255,358],()=>e(e.s=8447)),_N_E=e.O()}]);